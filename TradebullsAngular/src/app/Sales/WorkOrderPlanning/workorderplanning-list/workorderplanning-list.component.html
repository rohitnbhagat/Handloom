<div class="clearfix"></div>
<div class="row" *ngIf="!IsAddNew && !IsPrint">
    <div class="col-md-12 col-sm-12 ">
        <div class="x_panel p-0">
            <div class="x_title mb-0 mt-1">
                <h2 class="pl-2">Insert Stock List</h2>
                <ul class="nav navbar-right panel_toolbox mt-1">
                    <li>
                        <button type="button" class="btn btn-primary btn-sm" (click)="OpenWorkOrderPlanning(0)">&nbsp;<i
                                class="fa fa-plus-circle"></i>&nbsp;&nbsp;Add Work Order Planning</button>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content p-0">
                <div class="row ">
                    <div class="col-md-12 col-sm-12">
                        <form class="form-horizontal form-label-left mt-3" novalidate="">
                            
                            <div class="item form-group">
                                <label class="col-form-label col-xl-1 col-md-3 col-sm-6 label-align">WOP No
                                </label>
                                <div class="col-xl-3 col-md-3 col-sm-6">
                                    <input type="text" name="VoucherNo" class="form-control"
                                        [(ngModel)]="VoucherNo" />
                                </div>
                                <label class="col-form-label col-xl-1 col-md-3 col-sm-6 label-align">WOP From Date
                                </label>
                                <div class="col-xl-2 col-md-3 col-sm-6">
                                    <div class="input-group mb-0">
                                        <input type="text" class="form-control" matInput
                                            [matDatepicker]="FromDatepicker" name="FromDate" [(ngModel)]="FromDate">
                                        <mat-datepicker #FromDatepicker></mat-datepicker>
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-sm btn-primary"
                                                (click)="FromDatepicker.open()">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-xl-1 col-md-0 col-sm-0">
                                </div>
                                <label class="col-form-label col-xl-1 col-md-3 col-sm-6 label-align">WOP To Date
                                </label>
                                <div class="col-xl-2 col-md-3 col-sm-6">
                                    <div class="input-group mb-0">
                                        <input type="text" class="form-control" matInput [matDatepicker]="ToDatepicker"
                                            name="ToDate" [(ngModel)]="ToDate">
                                        <mat-datepicker #ToDatepicker></mat-datepicker>
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-sm btn-primary"
                                                (click)="ToDatepicker.open()">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-xl-1 col-md-0 col-sm-0">
                                </div>
                            </div>
                            <div class="item form-group">
                                <!-- <label class="col-form-label col-xl-1 col-md-3 col-sm-6 label-align">Supplier
                                </label>
                                <div class="col-xl-3 col-md-3 col-sm-6">
                                    <mat-form-field class="form-control-ddl">
                                        <mat-select [(value)]="PartyID" placeholder="Search" class="form-control">
                                            <mat-option>
                                                <ngx-mat-select-search #txtPartySearch placeholderLabel="Search..."
                                                    [noEntriesFoundLabel]="'No match found...'"></ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let c of lstPartys | filtercolumn:txtPartySearch.value:['label']"
                                                [value]="c.value" class="form-control-option">
                                                {{c.label}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                
                                <label class="col-form-label col-xl-1 col-md-3 col-sm-6 label-align">Brand
                                </label>
                                <div class="col-xl-3 col-md-3 col-sm-6">
                                    <mat-form-field class="form-control-ddl">
                                        <mat-select [(value)]="BrandID" placeholder="Search"
                                            class="form-control">
                                            <mat-option>
                                                <ngx-mat-select-search #txtBrandSearch
                                                    placeholderLabel="Search..."
                                                    [noEntriesFoundLabel]="'No match found...'"></ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let c of lstBrands | filtercolumn:txtBrandSearch.value:['label']"
                                                [value]="c.value" class="form-control-option">
                                                {{c.label}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                 <div class="col-xl-1 col-md-0 col-sm-0">
                                </div> -->
                                <label class="col-form-label col-xl-1 col-md-3 col-sm-6 label-align">
                                </label>
                                <div class="col-xl-3 col-md-3 col-sm-6">
                                    <button type="button" class="btn btn-danger btn-sm" (click)="loadOrders(true)">&nbsp;<i
                                        class="fa fa-search"></i>&nbsp;&nbsp;Search</button>
                                </div>
                            </div>
                            
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row" *ngIf="!IsAddNew && !IsPrint">
    <div class="col-md-12 col-sm-12 ">
        <div class="x_panel p-0">
            <div class="x_title mb-0 mt-1">
                <!-- <h2 class="pl-2">Sales Order List</h2> -->
                <ul class="nav navbar-right panel_toolbox mt-1">
                    <li>
                        <button type="button" class="btn btn-primary btn-sm" (click)="loadOrders(true)">&nbsp;<i
                                class="fa fa-refresh"></i>&nbsp;&nbsp;Refresh</button>
                    </li>
                    <li>
                        <button type="button" class="btn btn-primary btn-sm" (click)="ExportToExcel()">&nbsp;<i
                                class="fa fa-file-excel-o"></i>&nbsp;&nbsp;Export To Excel</button>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content p-0 table-container">
                <table mat-table [dataSource]="dataSource" matSort class="table table-striped mb-0 mb-n-6px">

                    <ng-container matColumnDef="Actions">
                        <th class="column-title" mat-header-cell *matHeaderCellDef style="width: 80px;"> Actions </th>
                        <td mat-cell *matCellDef="let element">
                                      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu" style="width: 30px; height: 30px; padding: 3px;">
                                        <mat-icon>more_vert</mat-icon>
                                      </button> 
                                      <mat-menu #menu="matMenu">
                                        <button class="btn-mat-menu-item" mat-menu-item style="min-height:32px" (click)="OpenWorkOrderPlanning(element.WOPlanningID)"  *ngIf="element.IsLocked">
                                            <mat-icon>visibility</mat-icon>
                                            <span>View</span>
                                          </button>
                                        <button class="btn-mat-menu-item" mat-menu-item style="min-height:32px" (click)="OpenWorkOrderPlanning(element.WOPlanningID)" *ngIf="!element.IsLocked">
                                          <mat-icon>edit</mat-icon>
                                          <span>Edit</span>
                                        </button>
                                        <button class="btn-mat-menu-item" mat-menu-item style="min-height:32px" (click)="DeleteRow(element)" [disabled]="element.IsLocked">
                                          <mat-icon>delete</mat-icon>
                                          <span>Delete</span>
                                        </button>
                                        <button class="btn-mat-menu-item" mat-menu-item style="min-height:32px" (click)="PrintRow(element)">
                                          <mat-icon>print</mat-icon>
                                          <span>Print</span>
                                        </button>
                                      </mat-menu>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="WOPlanningID">
                        <th class="column-title justify-content-center" mat-header-cell *matHeaderCellDef
                            mat-sort-header style="width: 105px;">ID </th>
                        <td class="text-center" mat-cell *matCellDef="let row"> {{row.WOPlanningID}} </td>
                    </ng-container>

                    <ng-container matColumnDef="WONo">
                        <th class="column-title justify-content-left" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 150px;"> Work Order No</th>
                        <td mat-cell *matCellDef="let row"> {{row.WONo}} </td>
                    </ng-container>

                    <ng-container matColumnDef="WODate">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 150px;"> Work Order Date </th>
                        <td mat-cell *matCellDef="let row"> {{row.WODate | date:'dd-MM-yyyy'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="WOType">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 250px;"> Work Order Type </th>
                        <td mat-cell *matCellDef="let row"> {{row.WOType}} </td>
                    </ng-container>

                     <ng-container matColumnDef="PreparedByName">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 200px;"> Prepared By</th>
                        <td mat-cell *matCellDef="let row"> {{row.PreparedByName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="AssignedToName">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 200px;"> Assigned To </th>
                        <td mat-cell *matCellDef="let row"> {{row.AssignedToName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="AuthorizedByName">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 200px;"> Authorized By </th>
                        <td mat-cell *matCellDef="let row"> {{row.AuthorizedByName}} </td>
                    </ng-container>


                    <ng-container matColumnDef="TotalQty">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 100px;"> Total Qty </th>
                        <td mat-cell *matCellDef="let row" class="text-right"> {{row.TotalQty | number:'1.2-2'}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="ModifiedByName">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 200px;"> Modified By</th>
                        <td mat-cell *matCellDef="let row"> {{row.ModifiedByName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="ModifiedDate">
                        <th class="column-title" mat-header-cell *matHeaderCellDef mat-sort-header
                            style="width: 200px;"> Modified Date </th>
                        <td mat-cell *matCellDef="let row"> {{row.ModifiedDate | date:'dd-MM-yyyy hh:mm:ss a'}} </td>
                    </ng-container>



                    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="headings"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                    </tr>


                </table>
                <mat-paginator [pageSizeOptions]="[10, 20, 30, 40, 50]" showFirstLastButtons></mat-paginator>
            </div>
        </div>
    </div>
</div>


<app-workorderplanning-add #WorkOrderPlanningAdd (BackEvent)="WorkOrderPlanningBackEvent()"></app-workorderplanning-add>
<app-workorderplanning-print #WorkOrderPlanningPrint (BackEvent)="PrintClose_Click()"></app-workorderplanning-print>